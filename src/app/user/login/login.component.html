<!-- TODO: This div should probably be its own module so that it can be 
    overlayed over other pages when loading data or other screens. It's here for now
-->
<div *ngIf="showLoadingDiv" class="loading-screen">
    <div class="loading-spinner">
        <mat-spinner></mat-spinner>
    </div>
</div>


<div class="main-container-login" id="main-login-container">
    <div class="login-container">
        <div class="login-inputs-container">
            <!-- Container for sign in title-->
            <div class="login-title">
                <h2>Sign in to AltruSight </h2>
            </div>

            <!-- Sign In Error Container -->
            <div class="signin-error">
                {{errorMessage}}
            </div>

            <!-- Container for login inputs-->
            <form [formGroup]="signInForm" class="login-inputs">
                <!-- Email input -->
                <mat-form-field appearance="outline">
                    <mat-label>Email</mat-label>
                    <input type="email" [formControl]="userEmailControl" matInput placeholder="Enter Your Email">
                    <mat-icon matSuffix>email</mat-icon>
                    <mat-error *ngIf="userEmailControl.hasError('email')" > Please enter a <b>valid</b> email addres</mat-error>
                    <mat-error *ngIf="userEmailControl.hasError('required')"> An email address is <b>required</b> </mat-error>
                    <!-- <mat-error *ngIf="userEmailControl.hasError('customEmailError')"> Some other login error </mat-error> -->
                </mat-form-field>
    
                <!-- Password input -->
                <mat-form-field appearance="outline">
                    <mat-label>Password</mat-label>
                    <input [formControl]="userPasswordControl" matInput [type]="hidePassword ? 'password' : 'text'">
                    <button mat-icon-button matSuffix (click)="hidePassword = !hidePassword" [attr.aria-label]="'Hide password'" [attr.aria-pressed]="hidePassword">
                        <mat-icon>{{hidePassword ? 'visibility_off' : 'visibility'}}</mat-icon>
                    </button>
                    <mat-error> Password is required </mat-error>
                    <mat-hint><a class="forgot-password" href="login">Forgot your password? Click here!</a></mat-hint>
                </mat-form-field>

                <!-- Sign in button -->
                <button type="button" (click)="signIn(userEmailControl.value, userPasswordControl.value)" class="login-button" mat-raised-button color="primary">Sign in</button>

                <!-- Register container -->
                <div class="register-with-us">
                    Don't have an account with us yet? Register <a href="/register"> here! </a>
                </div>

            </form>
            
        </div>
    </div>

    <!-- container to add image credits -->
    <div class="image-credits-container">
        Photo by 
        <a class="image-credits" href="https://www.pexels.com/@scottwebb?utm_content=attributionCopyText&utm_medium=referral&utm_source=pexels"> 
            Scott Webb  
        </a>
        from
        <a class="image-credits" href="https://www.pexels.com/photo/shapes-and-pattern-2346594/?utm_content=attributionCopyText&utm_medium=referral&utm_source=pexels">
            Pexels
        </a>
    </div>
</div>
